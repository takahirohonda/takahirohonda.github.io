"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[8363],{74944:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(74848),i=n(28453);const o={slug:"data-engineering/data-ingestion/export-launch-darkly-flags",title:"Exporting LaunchDarkly Flag List into a CSV File with Python",tags:["Data Engineering","Data Ingestion","LaunchDarkly","Python"]},r=void 0,s={permalink:"/data-engineering/data-engineering/data-ingestion/export-launch-darkly-flags",source:"@site/data-engineering/data-ingestion/2019-06-12-export-launch-darkly-flags.md",title:"Exporting LaunchDarkly Flag List into a CSV File with Python",description:"At the moment, LaunchDarkly does not have functionality to export a list of flags as csv or excel file. This can change very near future (it may already have the functionality by the time you are reading this post). The workaround is to use API to ingest the data.",date:"2019-06-12T00:00:00.000Z",tags:[{label:"Data Engineering",permalink:"/data-engineering/tags/data-engineering"},{label:"Data Ingestion",permalink:"/data-engineering/tags/data-ingestion"},{label:"LaunchDarkly",permalink:"/data-engineering/tags/launch-darkly"},{label:"Python",permalink:"/data-engineering/tags/python"}],readingTime:1.535,hasTruncateMarker:!0,authors:[],frontMatter:{slug:"data-engineering/data-ingestion/export-launch-darkly-flags",title:"Exporting LaunchDarkly Flag List into a CSV File with Python",tags:["Data Engineering","Data Ingestion","LaunchDarkly","Python"]},unlisted:!1,prevItem:{title:"Loading Data Frame to Relational Database with R",permalink:"/data-engineering/data-engineering/data-ingestion/loading-data-frame-to-relational-database-with-r"}},l={authorsImageUrls:[]},p=[];function c(e){const t={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"At the moment, LaunchDarkly does not have functionality to export a list of flags as csv or excel file. This can change very near future (it may already have the functionality by the time you are reading this post). The workaround is to use API to ingest the data. "}),"\n",(0,a.jsx)(t.p,{children:"Here is the quick and dirty Python script to do it. You can replace the API key and endpoint and use it straight away!"}),"\n",(0,a.jsx)(t.p,{children:"I included epoch time conversion functions, too."}),"\n",(0,a.jsx)(t.p,{children:"The catch is that I am not sure about the maximum number of flags we can get. I had about 140 flags and there was no pagenation. Documentation doesn\u2019t really mention it, either. So, if you see the pagination in JSON file, you need to do a loop to get the next page."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"import json, requests\nimport time\nfrom time import strptime, strftime, mktime, gmtime, localtime\nurl = 'https://app.launchdarkly.com/api/v2/flags/default?env=production'\ntoken = \"your api token\"\nheaders = {\"Authorization\": token, 'Content-Type':'application/json'}\n\n\nr = requests.get(url, headers=headers)\nprettyJson = json.dumps(r.json(), indent=4, sort_keys=True)\nprint(r.status_code)\n# print(r.headers)\n# print(prettyJson)\n\nf = open('./data/feature_flag_list.json', 'w')\nf.write(prettyJson)\nprint('file feature_flag_list.json created!')\nprint('Starting transformation')\n\ndef epoch_to_stamp(epochtime):\n    '''This function converts epochtime to timestamp'''\n    return time.strftime('%Y-%m-%d %H:%M:%S', time.gmtime(epochtime/1000.0))\n\ndef convert_epoch_to_local(epoch):\n    '''Converting epoch to local time'''\n    return strftime('%Y-%m-%d %H:%M:%S', localtime(epoch))\n\nfeatureFlagList = []\nrepsonse = r.json()\nitems = repsonse['items']\nfor i in items:\n  tmp = []\n  tmp.append(i[\"name\"])\n  tmp.append(i[\"key\"])\n  tmp.append(i[\"kind\"])\n  tmp.append(epoch_to_stamp(i[\"creationDate\"]))\n  tmp.append(epoch_to_stamp(i[\"environments\"][\"production\"][\"lastModified\"]))\n  tmp.append(str(i[\"environments\"][\"production\"][\"on\"]))\n  try:\n    tmp.append(i[\"_maintainer\"][\"email\"])\n  except KeyError:\n    tmp.append('NA')\n  featureFlagList.append(tmp)\n\nheaders = ['name','key','kind','creationDate','lastModified','flagValue', 'email']\n\ncsv = open('./data/feature_flag_list.csv', 'w')\n\ncsv.write(','.join(headers)+'\\n')\nfor i in featureFlagList:\n  csv.write(','.join(i)+'\\n')\n\nprint('feature_flag_list.csv created!')\ncsv.close()\n"})}),"\n",(0,a.jsx)(t.p,{children:"But, wait. I\u2019ve got something even better."}),"\n",(0,a.jsx)(t.p,{children:"I created a React Feature Flag dashboard with TypeScript with AWS Cognito authentication. You can clone the repo and add the appropriate config file as in README. Then, you will have an awesome serverless web dashboard to visualise your flags."}),"\n",(0,a.jsx)(t.p,{children:"Check out the repo here: launch-darkly-flag-dashboard"})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var a=n(96540);const i={},o=a.createContext(i);function r(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);