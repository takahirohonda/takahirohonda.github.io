"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[1270],{56773:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>d,toc:()=>l});var o=t(74848),i=t(28453);const a={sidebar_position:28},s="How to Bundle Audio File into JS App",d={id:"Web/Frontend/audio-file-js-app",title:"How to Bundle Audio File into JS App",description:"By using the HTML audio element, we can embed sound in documents. When your app in running in a server, we can add audio files and refer to the paths in the audio element\u2019s src attribute.",source:"@site/docs/Web/Frontend/28.audio-file-js-app.md",sourceDirName:"Web/Frontend",slug:"/Web/Frontend/audio-file-js-app",permalink:"/docs/Web/Frontend/audio-file-js-app",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:28,frontMatter:{sidebar_position:28},sidebar:"tutorialSidebar",previous:{title:"IE11 Support for amazon-connect-chatjs",permalink:"/docs/Web/Frontend/ie11-support-amazon-connect-chatjs"},next:{title:"Resizing Image for Frontend with Python",permalink:"/docs/Web/Frontend/resize-image-with-python"}},r={},l=[];function c(e){const n={code:"code",h1:"h1",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"how-to-bundle-audio-file-into-js-app",children:"How to Bundle Audio File into JS App"}),"\n",(0,o.jsx)(n.p,{children:"By using the HTML audio element, we can embed sound in documents. When your app in running in a server, we can add audio files and refer to the paths in the audio element\u2019s src attribute."}),"\n",(0,o.jsx)(n.p,{children:"What if you are creating an JS bundle that can be injected into a web site as a script tag? In this post, we will look into how this can be done."}),"\n",(0,o.jsx)(n.p,{children:"The quickest way is to convert mp3 file into a base64 encoded string, then add the string in HTML. In this way, the bundle can include audio."}),"\n",(0,o.jsx)(n.p,{children:"I learned this trick from a friend of mine, who also has a blog site called mydevhack. It\u2019s got a lot of cool front end hack. You should check it out."}),"\n",(0,o.jsx)(n.p,{children:"Example"}),"\n",(0,o.jsx)(n.p,{children:"I made a bell that rings. This is a single JavaScript bundle that I am injecting into this div. You can see the base64 encoded string in the bundle here. The source code can be found here."}),"\n",(0,o.jsx)(n.p,{children:"Tap the bell to ring!"}),"\n",(0,o.jsx)(n.p,{children:"Steps"}),"\n",(0,o.jsx)(n.p,{children:"Convert mp3 into base64 encoded string\nOnce you have an audio file, I recommend you to edit the file with an audio editing tool to trim the unnecessary leading and trailing part and export it with lower quality mp3. You don\u2019t need to have a fancy tool like ProTools or Ableton. You can just download an open source audio editor like Audacity."}),"\n",(0,o.jsx)(n.p,{children:"Compressing audio files is an important step because we want to minimise the size of the bundle. Another technique is to make the audio file as mono instead of stereo to reduce the size. The bigger the file is the bigger the base64 encoded string will be. If you want to go for the quality, It is probably better to have a good quality audio file stored somewhere instead of bundling it."}),"\n",(0,o.jsx)(n.p,{children:"If you are in a hurry, the compression step doesn\u2019t need to happen. You can just convert mp3 to base64 by using a website offers free mp3 to base64 conversion service like Base64Guru."}),"\n",(0,o.jsx)(n.p,{children:"Add the base64 encoded string into HTML\nOnce you convert the audio into base64 encoded string, all you need to do is to include it in the source tag inside the audio tag. You can have a constant variable and import it into the part where you want to use the audio"}),"\n",(0,o.jsx)(n.p,{children:"Add JavaScript to play sound\nThen you can simply add JavaScript to trigger play."}),"\n",(0,o.jsxs)(n.p,{children:["Here is an example code with Audio embedded with the function to trigger audio play. Make sure to prepend data",":audio","/mpeg;base64, to the base64 encoded audio text."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { BellImage } from '../assets/Bell-Image';\n// This is the base64 encoded sound. The file looks like:\n// export const BellSound = '//sdfagergr......'\nimport { BellSound } from '../assets/Bell-Sound';\nexport class Bell {\n\n  private readonly _host: HTMLElement;\n\n  constructor(host: HTMLElement) {\n    this._host = host;\n  }\n\n  render(): void {\n    this._host.insertAdjacentHTML('beforeend',\n    `<div class=\"ring-bell-wgt-img-container\">${BellImage}</div>\n    <audio id=\"ring-bell-wgt-audio\" controls style=\"display:none\">\n      <source\n        src=\"data:audio/mpeg;base64,${BellSound}\"\n        type=\"audio/mpeg\">\n    </audio>\n    `);\n  }\n\n  ringBell(): void {\n    const audioElem = this._host\n    .querySelector('#ring-bell-wgt-audio') as HTMLAudioElement;\n    audioElem.load();\n    audioElem.play();\n  }\n"})}),"\n",(0,o.jsx)(n.p,{children:"(2020-05-03)"})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>d});var o=t(96540);const i={},a=o.createContext(i);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);