"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[7823],{7009:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var a=t(74848),o=t(28453);const s={slug:"data-engineering/data-ingestion/python-xml-to-json",title:"Sending XML Payload and Converting XML Response to JSON with Python",tags:["Data Engineering","Data Ingestion","Python","QAS","XML"]},i=void 0,r={permalink:"/mydatahack-old-blog/data-engineering/data-engineering/data-ingestion/python-xml-to-json",source:"@site/data-engineering/data-ingestion/2020-04-03-python-xml-to-json.md",title:"Sending XML Payload and Converting XML Response to JSON with Python",description:"If you need to interact with a REST endpoint that takes a XML string as a payload and returns another XML string as a response, this is the quick guide if you want to use Python.",date:"2020-04-03T00:00:00.000Z",tags:[{label:"Data Engineering",permalink:"/mydatahack-old-blog/data-engineering/tags/data-engineering"},{label:"Data Ingestion",permalink:"/mydatahack-old-blog/data-engineering/tags/data-ingestion"},{label:"Python",permalink:"/mydatahack-old-blog/data-engineering/tags/python"},{label:"QAS",permalink:"/mydatahack-old-blog/data-engineering/tags/qas"},{label:"XML",permalink:"/mydatahack-old-blog/data-engineering/tags/xml"}],readingTime:.915,hasTruncateMarker:!0,authors:[],frontMatter:{slug:"data-engineering/data-ingestion/python-xml-to-json",title:"Sending XML Payload and Converting XML Response to JSON with Python",tags:["Data Engineering","Data Ingestion","Python","QAS","XML"]},unlisted:!1,prevItem:{title:"Sending XML Payload and Converting XML Response to JSON with Node.js",permalink:"/mydatahack-old-blog/data-engineering/data-engineering/data-ingestion/Node-xml-to-json"},nextItem:{title:"Downloading All Public GitHub Gist Files",permalink:"/mydatahack-old-blog/data-engineering/data-engineering/data-ingestion/download-github-gist"}},d={authorsImageUrls:[]},l=[];function g(n){const e={code:"code",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"If you need to interact with a REST endpoint that takes a XML string as a payload and returns another XML string as a response, this is the quick guide if you want to use Python."}),"\n",(0,a.jsx)(e.p,{children:"If you want to do it with Node.js, you can check out the post here."}),"\n",(0,a.jsx)(e.p,{children:"Just like the example with Node.js, we will use QAS endpoint (see more info on this in the intro of the node.js version post)."}),"\n",(0,a.jsx)(e.p,{children:"The idea is very simple. We will pass the XML payload as a string and convert the response XML string to a dictionary by using xmltodict and parse it to JSON. For an API call, we use the requests module."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'import requests, json, xmltodict\n\nrequest_url = \'https://ws.ondemand.qas.com/ProOnDemand/V3/ProOnDemandService.asmx?WSDL=\'\nqas_token = \'<add your token>\'\nsoap_action = \'http://www.qas.com/OnDemand-2011-03/DoSearch\'\nheaders = {\n  \'Content-Type\':\'text/xml\',\n  \'Auth-Token\':qas_token,\n  \'SOAPAction\': soap_action\n  }\n\nxml = \'<?xml version="1.0" encoding="UTF-8" ?>\\\n<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ond="http://www.qas.com/OnDemand-2011-03">\\\n  <soapenv:Header>\\\n    <ond:QAQueryHeader />\\\n  </soapenv:Header>\\\n  <soapenv:Body>\\\n    <ond:QASearch>\\\n      <ond:Country>AUS</ond:Country>\\\n      <ond:Engine Flatten="true" Intensity="Close" PromptSet="Default" Threshold="5" Timeout="10000">Intuitive</ond:Engine>\\\n      <ond:Layout></ond:Layout>\\\n      <ond:Search>101 Colll</ond:Search>\\\n    </ond:QASearch>\\\n  </soapenv:Body>\\\n</soapenv:Envelope>\'\n\n\nr = requests.post(request_url, data=xml, headers=headers)\njson_results = json.dumps(xmltodict.parse(r.text))\nprint(json_results)\n'})}),"\n",(0,a.jsx)(e.p,{children:"That\u2019s it. Pretty easy!"})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(g,{...n})}):g(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>r});var a=t(96540);const o={},s=a.createContext(o);function i(n){const e=a.useContext(s);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),a.createElement(s.Provider,{value:e},n.children)}}}]);