"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[1278],{99797:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var t=s(74848),r=s(28453);const a={sidebar_position:15},i="Website Page Routing with Node.js Express and EJS",o={id:"Web/Node.js/page-routing-nodejs-express-and-ejs",title:"Website Page Routing with Node.js Express and EJS",description:"frameworks like Angular or React. I started web development with PHP. EJS feels a lot more like PHP and learning how to use was much easier for me.",source:"@site/docs/Web/Node.js/15.page-routing-nodejs-express-and-ejs.md",sourceDirName:"Web/Node.js",slug:"/Web/Node.js/page-routing-nodejs-express-and-ejs",permalink:"/docs/Web/Node.js/page-routing-nodejs-express-and-ejs",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"Sending Email After Form Submission with Node.js",permalink:"/docs/Web/Node.js/email-with-nodejs"},next:{title:"MongoDB CRUD Operation with Node.js",permalink:"/docs/Web/Node.js/mongo-curd-nodejs"}},l={},c=[];function d(e){const n={code:"code",h1:"h1",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"website-page-routing-with-nodejs-express-and-ejs",children:"Website Page Routing with Node.js Express and EJS"}),"\n",(0,t.jsx)(n.p,{children:"frameworks like Angular or React. I started web development with PHP. EJS feels a lot more like PHP and learning how to use was much easier for me."}),"\n",(0,t.jsx)(n.p,{children:"Another important component in Express is the Router class which is a middleware to make url path-based routing easy and maintainable."}),"\n",(0,t.jsx)(n.p,{children:"Aim here is to create a 3-page websites with home, about and contact pages with header, nav and footer templates and routing traffic by the express server. Let\u2019s get started!"}),"\n",(0,t.jsx)(n.p,{children:"Project Folder"}),"\n",(0,t.jsx)(n.p,{children:"We first create a main project folder and run npm init -y. Then, organise it as below."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"-- project_folder\n -- css\n    -- style.css\n -- html\n    -- about.ejs\n    -- contact.ejs\n    -- index.ejs\n    -- include\n        -- footer.ejs\n        -- head.ejs\n        -- nav.ejs\n        -- scripts.ejs\n -- routes\n    -- index.js\n -- app.js\n -- package.json\n -- package-lock.json\n -- node_modules\n"})}),"\n",(0,t.jsx)(n.p,{children:"Packages"}),"\n",(0,t.jsx)(n.p,{children:"Dependencies are below. For the front-end, we will use bootstrap 4 which requires jquery and popper.js. The ejs package for creating template."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'"dependencies": {\n    "bootstrap": "4.0.0",\n    "ejs": "2.6.1",\n    "body-parser": "1.18.3",\n    "express": "4.16.3",\n    "jquery": "3.3.1",\n    "popper.js": "1.12.9"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"URL Routing"}),"\n",(0,t.jsx)(n.p,{children:"We are using the Router class. This enable us to export the routing logic as a module and use it in the main app.js. There are a few different ways for routing (see documentation here). When the logic gets complicated, using the Router class to compartmentalise routing makes it easier to maintain."}),"\n",(0,t.jsx)(n.p,{children:"index.js in the routes folder"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'const express = require("express");\nconst router = express.Router();\n\nrouter.get("/", (req, res) => {\n  console.log("Request for home recieved");\n  res.render("index");\n});\n\nrouter.get("/about", (req, res) => {\n  console.log("Request for about page recieved");\n  res.render("about");\n});\n\nrouter.get("/contact", (req, res) => {\n  console.log("Request for contact page recieved");\n  res.render("contact");\n});\n\nmodule.exports = router;\n'})}),"\n",(0,t.jsx)(n.p,{children:"app.js in the main project folder"}),"\n",(0,t.jsx)(n.p,{children:"To serve static files, we need to use the express.static. By default, express cannot access to the files in other folders. We also need to set the default views directory where we have ejs files. The router gets imported and used as middleware."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'const express = require("express");\nconst path = require("path");\nconst routes = require("./routes");\n\nconst app = express();\n// Set the default views directory to html folder\napp.set("views", path.join(__dirname, "html"));\n\n// Set the folder for css & java scripts\napp.use(express.static(path.join(__dirname, "css")));\napp.use(express.static(path.join(__dirname, "node_modules")));\n\n// Set the view engine to ejs\napp.set("view engine", "ejs");\n\napp.use("/", routes);\n\napp.listen(3000, () => {\n  console.log("Server is running at localhost:3000");\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"Serving Bootstrap and Javascripts files"}),"\n",(0,t.jsx)(n.p,{children:"Once we set the folders to serve static files by using the express.static, the path to the css or javascript files should not include the folder path. If you do, you will get the horrible MIME type error as below:"}),"\n",(0,t.jsx)(n.p,{children:"Refused to apply style from whatever-the-file-path because its MIME type (\u2018text/html\u2019) is not a supported stylesheet MIME type, and strict MIME checking is enabled)."}),"\n",(0,t.jsx)(n.p,{children:"You can replicate this error by changing the stylesheet path from href=\u201dbootstrap/dist/css/bootstrap.min.css\u201d to href=\u201d../node_modules/bootstrap/dist/css/bootstrap.min.css\u201d in the head.ejs file for the link element."}),"\n",(0,t.jsx)(n.p,{children:"Using Templates with EJS"}),"\n",(0,t.jsx)(n.p,{children:"This is the simplest part. Use the ejs syntax which is very similar to including templates with PHP."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"<% include ./include/head %>"}),"\nWe can now create the front-end view in whatever way you want by writing html and css."]}),"\n",(0,t.jsx)(n.p,{children:"Here is the html and css example of simple 3 page websites. Note that we are using bootstrap 4 for most of the styling with a few custom css."}),"\n",(0,t.jsx)(n.p,{children:"HTML"}),"\n",(0,t.jsx)(n.p,{children:"index.ejs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <% include ./include/head %>\n  <body>\n    <% include ./include/nav %>\n    <div class="container">\n      <div class="row">\n        <h1>Home</h1>\n      </div>\n      <hr />\n      <div class="row">\n        <p style="height:300px;">Content Here...</p>\n      </div>\n    </div>\n\n    <% include ./include/scripts %> <% include ./include/footer %>\n  </body>\n</html>\n'})}),"\n",(0,t.jsx)(n.p,{children:"about.ejs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <% include ./include/head %>\n  <body>\n    <% include ./include/nav %>\n    <div class="container">\n      <div class="row">\n        <h1>About</h1>\n      </div>\n      <hr />\n      <div class="row">\n        <p style="height:300px;">Content Here...</p>\n      </div>\n    </div>\n\n    <% include ./include/scripts %> <% include ./include/footer %>\n  </body>\n</html>\n'})}),"\n",(0,t.jsx)(n.p,{children:"contact.ejs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <% include ./include/head %>\n  <body>\n    <% include ./include/nav %>\n    <div class="container">\n      <div class="row">\n        <h1>Contact</h1>\n      </div>\n      <hr />\n      <div class="row">\n        <p style="height:300px;">Content Here...</p>\n      </div>\n    </div>\n\n    <% include ./include/scripts %> <% include ./include/footer %>\n  </body>\n</html>\n'})}),"\n",(0,t.jsx)(n.p,{children:"head.ejs in the include folder"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<head>\n  <meta charset="utf-8" />\n  <meta\n    name="viewport"\n    content="width=device-width, initial-scale=1, shrink-to-fit=no"\n  />\n  <meta http-equiv="x-ua-compatible" content="ie=edge" />\n  <title>Node EJS | Home</title>\n\n  <link\n    rel="stylesheet"\n    type="text/css"\n    href="../node_modules/bootstrap/dist/css/bootstrap.min.css"\n  />\n  <link rel="stylesheet" type="text/css" href="style.css" />\n</head>\n'})}),"\n",(0,t.jsx)(n.p,{children:"nav.ejs in the include folder"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<nav class="navbar navbar-expand-lg navbar-light bg-light">\n    <a class="navbar-brand" href="#">Navbar</a>\n    <button class="navbar-toggler" type="button" data-toggle="collapse"\n    data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">\n        <span class="navbar-toggler-icon"></span>\n    </button>\n    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">\n        <div class="navbar-nav ml-auto">\n        <a class="nav-item nav-link active" href="/">Home</span></a>\n        <a class="nav-item nav-link" href="about">About</a>\n        <a class="nav-item nav-link" href="contact">Contact</a>\n        </div>\n    </div>\n</nav>\n'})}),"\n",(0,t.jsx)(n.p,{children:"footer.ejs in the include folder"}),"\n",(0,t.jsx)(n.p,{children:"Included a small trick to call Javascript. It displays the current year dynamically."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<footer class="container-fluid footer">\n  <div class="container">\n    <div class="row">\n      <div class="col-12">\n        <p></p>\n        <p></p>\n        <% let year = (new Date()).getFullYear() %>\n        <p style="float:right;">&copy;<%= year %> mydatahack.com</p>\n      </div>\n    </div>\n  </div>\n</footer>\n'})}),"\n",(0,t.jsx)(n.p,{children:"scripts.ejs in the include folder"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'\x3c!-- jQuery first, then Popper.js, then Bootstrap JS. --\x3e\n<script src="jquery/dist/jquery.slim.min.js"><\/script>\n<script src="popper.js/dist/umd/popper.min.js"><\/script>\n<script src="bootstrap/dist/js/bootstrap.min.js"><\/script>\n'})}),"\n",(0,t.jsx)(n.p,{children:"CSS"}),"\n",(0,t.jsx)(n.p,{children:"style.css"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"hr {\n  background-color: #fff;\n  border-top: 2px dotted #8c8b8b;\n}\n\n.footer {\n  background-color: #d1c4e9;\n  margin: 0px auto;\n  padding: 20px 0px 20px 0px;\n  vertical-align: bottom;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"(2018-06-02)"})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var t=s(96540);const r={},a=t.createContext(r);function i(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);