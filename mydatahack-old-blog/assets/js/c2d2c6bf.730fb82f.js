"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[1745],{57908:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>h});var o=t(74848),s=t(28453);const a={sidebar_position:8},r="How To Install Python 3 and Create Virtual Environment in Centos, Redhat and Amazon Linux",i={id:"Infrastructure/Miscellaneous/python-virtual-env-2",title:"How To Install Python 3 and Create Virtual Environment in Centos, Redhat and Amazon Linux",description:"The scope of this post is to install Python 3 for a user and create a virtual environment in Centos, Redhat or Amazone Linux. Linux comes with Python 2.7 and the best practice is not to mess with. This is because Linux OS has some dependency and upgrading it to 3 may cause problems. If you are developing with Python 3, I recommend to install it for a user. Knowing how to create virtual environments becomes handy for serverless microservice development, too.",source:"@site/docs/Infrastructure/Miscellaneous/8.python-virtual-env-2.md",sourceDirName:"Infrastructure/Miscellaneous",slug:"/Infrastructure/Miscellaneous/python-virtual-env-2",permalink:"/docs/Infrastructure/Miscellaneous/python-virtual-env-2",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"How to Install Python 3 and Create Virtual Environment In Ubuntu",permalink:"/docs/Infrastructure/Miscellaneous/python-virtual-env"},next:{title:"Resolving Docker Deamon Is Not Running Error From Command Prompt",permalink:"/docs/Infrastructure/Miscellaneous/docker-deamon-error"}},l={},h=[];function c(e){const n={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"how-to-install-python-3-and-create-virtual-environment-in-centos-redhat-and-amazon-linux",children:"How To Install Python 3 and Create Virtual Environment in Centos, Redhat and Amazon Linux"}),"\n",(0,o.jsx)(n.p,{children:"The scope of this post is to install Python 3 for a user and create a virtual environment in Centos, Redhat or Amazone Linux. Linux comes with Python 2.7 and the best practice is not to mess with. This is because Linux OS has some dependency and upgrading it to 3 may cause problems. If you are developing with Python 3, I recommend to install it for a user. Knowing how to create virtual environments becomes handy for serverless microservice development, too."}),"\n",(0,o.jsx)(n.p,{children:"If you want to do the same thing with Ubuntu, check out the post here"}),"\n",(0,o.jsx)(n.p,{children:"Let\u2019s get started."}),"\n",(0,o.jsx)(n.p,{children:"(1) Download Python Installation Package"}),"\n",(0,o.jsxs)(n.p,{children:["You first need to get the installation link (",(0,o.jsx)(n.a,{href:"https://www.python.org/downloads/release/python-364/",children:"https://www.python.org/downloads/release/python-364/"}),"). Today, python-3.6.4 is the latest version. Let\u2019s create a directory called python3 in your home directory and download it there and unzip it."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mkdir ~/python3\ncd python3\nwget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tar.xz\ntar xf Python-3.*\ncd Python-3*\n"})}),"\n",(0,o.jsx)(n.p,{children:"(2) Install it with Pip"}),"\n",(0,o.jsx)(n.p,{children:"We first need to install Development Tools for Linux. Then, configure the installation path and include pip upgrade."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'sudo yum groups install "Development Tools"\n./configure --prefix=/home/ec2-user/pythonfin --with-ensurepip=upgrade\n'})}),"\n",(0,o.jsx)(n.p,{children:"(3) Build"}),"\n",(0,o.jsx)(n.p,{children:"You first need to install openssl-devel otherwise you will get pip requires SSL/TSL error. Then you can build it."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo yum install zlib-devel bzip2-devel sqlite sqlite-devel openssl-devel\nmake\n"})}),"\n",(0,o.jsx)(n.p,{children:"(4) Install for the user"}),"\n",(0,o.jsx)(n.p,{children:"When you don\u2019t want to overwrite the python executable (safer, at least on some distros yum needs python to be 2.x, such as for RHEL6), you can install python3.* as a concurrent instance to the system default with an altinstall as below"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"make altinstall"}),"\n(5) Create Shortcut For Installed Python 3"]}),"\n",(0,o.jsx)(n.p,{children:"This makes it easier for the creation of virtual environments."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export python3=/home/ec2-user/pythonfin/bin/python3.6\nexport pip3=/home/ec2-user/pythonfin/bin/pip3.6\n"})}),"\n",(0,o.jsx)(n.p,{children:"(6) Install virtualenv and Create Virtual Environment"}),"\n",(0,o.jsx)(n.p,{children:"You can use the environment variables created in the previous step. In the command below, you are creating it in the pythonfin folder where Python 3 is installed."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$pip3 install virtualenv\n$python3 -m venv lambda (this creates environment in the pythonfin folder)\n"})}),"\n",(0,o.jsx)(n.p,{children:"(7) Activate Environment"}),"\n",(0,o.jsx)(n.p,{children:"Once you activate the environment, any installation with pip will go there. The python command uses the python binary for the environment."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"source /home/ec2-user/pythonfin/lambda/bin/activate"}),"\nYou are ready to go!"]}),"\n",(0,o.jsx)(n.p,{children:"Bonus Section"}),"\n",(0,o.jsx)(n.p,{children:"To apply above knowledge, let\u2019s bootstrap EC2 instance with Python 3 with Tensorflow and Keras installed at user level. You can save the script below as a text file and use it as user-data when you launch the instance."}),"\n",(0,o.jsx)(n.p,{children:"To bootstrap EC2 from a text file with AWS CLI, you need to have #!/bin/bash at the start to trigger the script. Make sure to have -y for auto-installation. You do not need to add sudo as the script is executed by root."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\nyum update -y\nyum install zlib-devel bzip2-devel sqlite sqlite-devel openssl-devel -y\nyum groups install "Development Tools" -y\nmkdir /home/ec2-user/python3\ncd /home/ec2-user/python3\nwget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tar.xz\ntar xf Python-3.*\ncd /home/ec2-user/python3/Python-3.6.4\n./configure --prefix=/home/ec2-user/python3 --with-ensurepip=upgrade\nmake\nmake altinstall\n/home/ec2-user/python3/bin/pip3.6 install h5py tensorflow tflearn keras boto3\n'})}),"\n",(0,o.jsx)(n.p,{children:"(2018-02-28)"})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var o=t(96540);const s={},a=o.createContext(s);function r(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);