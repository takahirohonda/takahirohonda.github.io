"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[4323],{67994:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var o=t(74848),s=t(28453);const a={sidebar_position:1},i="How to Configure Synonyms in Solr",r={id:"Web/Sitecore/configure-synonyms-in-solr",title:"How to Configure Synonyms in Solr",description:"To improve search results, one of the easiest way is to add synonyms. For example, a product may have an official name as well as commonly used name. When it is indexed against only the official name because the product name field doesn\u2019t have a commonly used name, typing the common name does not bring the result. This is frustrating to the user. In this scenario, we can configure the synonym that maps the common name to the official name.",source:"@site/docs/Web/Sitecore/1.configure-synonyms-in-solr.md",sourceDirName:"Web/Sitecore",slug:"/Web/Sitecore/configure-synonyms-in-solr",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Web/Sitecore/configure-synonyms-in-solr",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Sitecore",permalink:"/mydatahack-old-blog/mydatahack-old-blog/category/sitecore"},next:{title:"Dependency Injection Lifetime Management",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Web/Sitecore/di-lifetime-mgmt"}},d={},l=[];function c(e){const n={code:"code",h1:"h1",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"how-to-configure-synonyms-in-solr",children:"How to Configure Synonyms in Solr"}),"\n",(0,o.jsx)(n.p,{children:"To improve search results, one of the easiest way is to add synonyms. For example, a product may have an official name as well as commonly used name. When it is indexed against only the official name because the product name field doesn\u2019t have a commonly used name, typing the common name does not bring the result. This is frustrating to the user. In this scenario, we can configure the synonym that maps the common name to the official name."}),"\n",(0,o.jsx)(n.p,{children:"Another use case would be catching misspelling. If a particular word associated to a product is often misspelt by users, we can map the misspelt word to the correct spelling. In this way, we can ensure the user get the search result even if they misspelt the word. This simple trick can enhance the search results and prevent it from returning no result."}),"\n",(0,o.jsx)(n.p,{children:"The easiest way to make synonyms work in Solr is to do it at index time by adding a synonym field and a synonym file. As far as I know, this works for both Solr 5 and 6. Let\u2019s get started."}),"\n",(0,o.jsx)(n.p,{children:"Steps"}),"\n",(0,o.jsx)(n.p,{children:"(1) Go to the conf folder in the index folder."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd [path to the solr folder]\\solr-x.x.x\\server\\solr\\catalog_search_index\\conf\n"})}),"\n",(0,o.jsx)(n.p,{children:"(2) Add a synonym file in the folder"}),"\n",(0,o.jsx)(n.p,{children:"We need to add a text file containing synonym in the folder. By default, you will find the file called synonym.txt which contains the example of how to configure synonyms. We can use either => to map synonyms or just have comma separated words. When you use comma separated words, order does not seem to matter. You can just put a bunch of words and they all get indexed as synonyms at index time."}),"\n",(0,o.jsx)(n.p,{children:"You can map synonyms with an arrow."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"prednisolone => steroid"})}),"\n",(0,o.jsx)(n.p,{children:"Or comma separated if you have a lot of them."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"prednisolone, steroid, asthma, inflammation, rheumatoid arthritis, hello world"})}),"\n",(0,o.jsxs)(n.p,{children:["(3) Add field type in ",(0,o.jsx)(n.code,{children:"schema.xml"})]}),"\n",(0,o.jsxs)(n.p,{children:["Find schema.xml and add ",(0,o.jsx)(n.code,{children:"fieldType"})," that indicates the synonym for the field. You need to use the synonym filter and indicate the text file which contains synonym."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<fieldType name="productnamemanualsynonyms"\n\tclass="solr.TextField"\n\tpositionIncrementGap="500"\n\tsortMissingLast="true">\n\t<analyzer>\n\t\t<tokenizer class="solr.StandardTokenizerFactory"/>\n\t\t<filter class="solr.TrimFilterFactory"/>\n\t\t<filter class="solr.SynonymFilterFactory"\n\t\t\texpand="true"\n\t\t\tignoreCase="true"\n\t\t\tsynonyms="synonyms-productname.txt"\n\t\t\ttokenizerFactory="solr.StandardTokenizerFactory"/>\n\t\t<filter class="solr.LowerCaseFilterFactory"/>\n\t</analyzer>\n</fieldType>\n'})}),"\n",(0,o.jsx)(n.p,{children:"(4) Add field mapping to the field type"}),"\n",(0,o.jsx)(n.p,{children:"Once the filed type is added, we can add field that maps to the field type by using the name. Name can be whatever you decided to call."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<fields>\n\t<field\n\t\tname="productname_s"\n\t\ttype="productnamemanualsynonyms"\n\t\tindexed="true"\n\t\tstored="true"/>\n\t...\n'})}),"\n",(0,o.jsx)(n.p,{children:"(5) Reload the schema"}),"\n",(0,o.jsx)(n.p,{children:"Update on the schema.xml file can be reflected by reloading the schema by the url below. You can make a curl call or simply use a web browser. Updating the schema does not need Solr restart. Core is the name of index."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"curl http://solr-base-url:port/solr/admin/cores?action=RELOAD&core=product-index"})}),"\n",(0,o.jsx)(n.p,{children:"(6) Run index"}),"\n",(0,o.jsx)(n.p,{children:"In this method, synonyms are defined at index time. Once reload the schema, make sure to re-index."}),"\n",(0,o.jsx)(n.p,{children:"That\u2019s it."}),"\n",(0,o.jsx)(n.p,{children:"If you are still not sure how this works, I have a working config file you can check here. The example contains three fields."}),"\n",(0,o.jsx)(n.p,{children:"(2020-03-27)"})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var o=t(96540);const s={},a=o.createContext(s);function i(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);