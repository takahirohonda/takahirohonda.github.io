"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[4490],{45905:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var o=t(74848),i=t(28453);const a={sidebar_position:47},r="Customising Cognito SignIn UI for aws-amplify-react with TypeScript",s={id:"Web/Frontend/cognito-signin-ui",title:"Customising Cognito SignIn UI for aws-amplify-react with TypeScript",description:"Let\u2019s assume you are having trouble with customising Cognito Sign In UI for aws-amplify-react with TypeScript and have already know what AWS Cognito, aws-amplify and aws-amplify-react.",source:"@site/docs/Web/Frontend/47.cognito-signin-ui.md",sourceDirName:"Web/Frontend",slug:"/Web/Frontend/cognito-signin-ui",permalink:"/mydatahack-old-blog/docs/Web/Frontend/cognito-signin-ui",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:47,frontMatter:{sidebar_position:47},sidebar:"tutorialSidebar",previous:{title:"My Gulp Job Example",permalink:"/mydatahack-old-blog/docs/Web/Frontend/gulp-job-examples"},next:{title:"Getting Redux DevTools to Work with TypeScript",permalink:"/mydatahack-old-blog/docs/Web/Frontend/redux-dev-tools-ts"}},p={},c=[];function l(n){const e={code:"code",h1:"h1",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"customising-cognito-signin-ui-for-aws-amplify-react-with-typescript",children:"Customising Cognito SignIn UI for aws-amplify-react with TypeScript"}),"\n",(0,o.jsx)(e.p,{children:"Let\u2019s assume you are having trouble with customising Cognito Sign In UI for aws-amplify-react with TypeScript and have already know what AWS Cognito, aws-amplify and aws-amplify-react."}),"\n",(0,o.jsx)(e.p,{children:"Customising Cogito Signin UI is easy with JavaScript React. All you need to do is to extend the SignIn class in aws-amplify-react with a new showComponent method returning your customised UI. Here is the official documentation on Cognito Authentication for React. There is an excellent blog post that explains how to extend SignIn class here."}),"\n",(0,o.jsx)(e.p,{children:"If you are into plain JavaScript without any framework, check out this post, Serverless Authentication with AWS Cognito and JavaScript."}),"\n",(0,o.jsx)(e.p,{children:"Using aws-amplify-react with TypeScript requires a little bit more effort because the library does not offer types and you have to provide your own for customisation. It is surprising that aws-amplifiy is written in TypeScript, yet aws-amplify-react is only written in JavaScript and has no support for TypeScript (although this is likely to be changed in the future considering the popularity and benefits of developing application with TypeScript)."}),"\n",(0,o.jsx)(e.p,{children:"When you first use aws-amplify-react with TypeScript, you need to declare module to get it work as below (the file can be called as aws-amplify-react.d.ts in the types folder)."}),"\n",(0,o.jsx)(e.p,{children:"declare module 'aws-amplify-react';\nTo customise anything in that library, you need to provide more detailed type. Here is the example for customising SignIn page. Basically, any type error you get, you add that class, variable or function in this file."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'declare module "aws-amplify-react" {\n  export declare class SignIn extends React.Component {\n    _validAuthStates: string[];\n    handleInputChange: React.EventHandler;\n    signIn(): void;\n  }\n\n  interface IAuthenticatorProps {\n    hideDefault: boolean;\n    amplifyConfig: any;\n  }\n\n  export declare class Authenticator extends React.Component<IAuthenticatorProps> {}\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"Now, you can have your custom sign page by extending SignIn class."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import * as React from "react";\nimport { SignIn } from "aws-amplify-react";\n\nclass CustomSignIn extends SignIn {\n  constructor(props: any) {\n    super(props);\n    this._validAuthStates = ["signIn", "signedOut", "signedUp"];\n  }\n\n  showComponent(theme: any) {\n    return (\n      <form onSubmit={this.signIn}>\n        <label htmlFor="username">Username</label>\n        <input\n          onChange={this.handleInputChange}\n          type="text"\n          id="username"\n          key="username"\n          name="username"\n          placeholder="Username"\n        />\n        <p></p>\n        <label htmlFor="password">Password</label>\n        <input\n          onChange={this.handleInputChange}\n          type="text"\n          id="password"\n          key="password"\n          name="password"\n          placeholder="**********"\n        />\n        <p></p>\n        <button type="submit">Sign In Check</button>\n      </form>\n    );\n  }\n}\n\nexport default CustomSignIn;\n'})}),"\n",(0,o.jsx)(e.p,{children:"The authState is passed down to the child component. You can return your UI when authState is \u2018signedIn\u2019."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import * as React from "react";\nimport config from "./aws-exports";\nimport CustomSignIn from "./CustomSignIn";\nimport App from "./App";\nimport { Authenticator } from "aws-amplify-react";\n\nclass AppWithAuth extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <Authenticator hideDefault={true} amplifyConfig={config}>\n          <CustomSignIn />\n          <App />\n        </Authenticator>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AppWithAuth;\n'})}),"\n",(0,o.jsx)(e.p,{children:"Now wrap this in Authenticator with the CustomSignIn component we created. The authState will be available in the App component."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import * as React from "react";\nimport SignOut from "./SignOut";\n\ninterface AppProps {\n  authState?: any;\n}\n\nclass App extends React.Component<AppProps> {\n  constructor(props: AppProps, context: any) {\n    super(props, context);\n  }\n\n  render() {\n    if (this.props.authState == "signedIn") {\n      return (\n        <React.Fragment>\n          <h1>Hello World</h1>\n          <SignOut />\n        </React.Fragment>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default App;\n'})}),"\n",(0,o.jsx)(e.p,{children:"Then, use AppWithAuth component in the index.tsx."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import * as React from "react";\nimport * as ReactDOM from "react-dom";\nimport "../public/css/bootstrap.css";\nimport "../public/css/style.css";\nimport AppWithAuth from "./AppWithAuth";\n\nimport { Auth } from "aws-amplify";\nimport awsmobile from "./aws-exports";\nAuth.configure(awsmobile);\n\nReactDOM.render(<AppWithAuth />, document.getElementById("root"));\n'})}),"\n",(0,o.jsx)(e.p,{children:"That\u2019s it!"}),"\n",(0,o.jsx)(e.p,{children:"By the way, if you are having an error below, all you need to do is set NODE_ENV=production. It will stop doing the unnecessary package checking and error will disappear."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'bundle.js:1442 Uncaught Error: Cannot use e "__Schema" from another module or realm.\n\nEnsure that there is only one instance of "graphql" in the node_modules\ndirectory. If different versions of "graphql" are the dependencies of other\nrelied on modules, use "resolutions" to ensure only one version is installed.\n\nhttps://yarnpkg.com/en/docs/selective-version-resolutions\n\nDuplicate "graphql" modules cannot be used at the same time since different\nversions may have different capabilities and behavior. The data from one\nversion used in the function from another could produce confusing and\nspurious results.\n'})}),"\n",(0,o.jsx)(e.p,{children:"(2019-04-17)"})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>s});var o=t(96540);const i={},a=o.createContext(i);function r(n){const e=o.useContext(a);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),o.createElement(a.Provider,{value:e},n.children)}}}]);