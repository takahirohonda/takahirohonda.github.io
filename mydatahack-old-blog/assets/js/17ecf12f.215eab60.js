"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[8544],{93045:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var i=n(74848),o=n(28453);const s={sidebar_position:8},a="8. Deploying Jekyll Site to Github Page with Github Actions",l={id:"Git/jekyll-github-action",title:"8. Deploying Jekyll Site to Github Page with Github Actions",description:"I created my personal portfolio site with Jekyll. The site is simply chucked in the Github page. Now, it is time to use Github actions to deploy the site to the Github page repo every time I commit to master.",source:"@site/docs/Git/8-jekyll-github-action.md",sourceDirName:"Git",slug:"/Git/jekyll-github-action",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Git/jekyll-github-action",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"7. How to Add Private Key to SSH Agent with Git Bash",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Git/add-private-key-ssh-agent"},next:{title:"9. Should We Use Squash and Merge Option?",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Git/squash-vs-merge"}},r={},c=[];function d(e){const t={code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"8-deploying-jekyll-site-to-github-page-with-github-actions",children:"8. Deploying Jekyll Site to Github Page with Github Actions"}),"\n",(0,i.jsx)(t.p,{children:"I created my personal portfolio site with Jekyll. The site is simply chucked in the Github page. Now, it is time to use Github actions to deploy the site to the Github page repo every time I commit to master."}),"\n",(0,i.jsx)(t.p,{children:"Here is the code. I am not using the Jekyll actions available out there. Instead, installing Jekyll and build it with commands. It probably takes longer, but this works for me."}),"\n",(0,i.jsx)(t.p,{children:"As for the credential to be used in the Github action, we need to create a personal access token (Settingds -> Developer Settings -> Personal access token). Then, add the token to the Jekyll site repo. Then, the action can access to the token as below:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"with:\n  ACCESS_TOKEN: ${{ secrets.GIT_PAGE_DEPLOY }}\n  ...\n"})}),"\n",(0,i.jsx)(t.p,{children:"That's it. Now every commit to master builds the site and push to Github.io repo."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yml",children:"name: Deploy to GitHub Page\non:\n  push:\n    branches:\n      - master\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          persist-credentials: false\n\n      - name: Install\n        run: |\n          cd code\n          npm i\n          cd ..\n      - name: Unit-Tests\n        run: |\n          cd code\n          npm run test-single-run\n          cd ..\n      - name: Build-Assets\n        run: |\n          cd code\n          npm run deploy:prod\n          cd ..\n          pwd\n      - name: Set-Base-Url\n        run: |\n          cd deploy-scripts\n          node add-base-url.js\n          cd ..\n          pwd\n      - name: Build-Jekyll\n        run: |\n          sudo apt-get install ruby-full\n          sudo gem install bundler\n          sudo bundle install\n          bundle exec jekyll build\n      - name: Deploy_To_GithubPage\n        uses: JamesIves/github-pages-deploy-action@3.5.9\n        with:\n          ACCESS_TOKEN: ${{ secrets.GIT_PAGE_DEPLOY }}\n          BRANCH: master # The branch the action should deploy to.\n          FOLDER: _site # The folder the action should deploy.\n          REPOSITORY_NAME: mydatahack/mydatahack.github.io\n          TARGET_FOLDER: portfolio\n          CLEAN: true # Automatically remove deleted files from the deploy branch\n"})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var i=n(96540);const o={},s=i.createContext(o);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);