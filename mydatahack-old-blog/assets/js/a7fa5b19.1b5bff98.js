"use strict";(self.webpackChunkmydatahack_blog_site=self.webpackChunkmydatahack_blog_site||[]).push([[6911],{84700:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var a=n(74848),s=n(28453);const o={sidebar_position:45},r="Clarifying Which Babel to Use for Compiling React Today",i={id:"Web/Frontend/babel-react",title:"Clarifying Which Babel to Use for Compiling React Today",description:"Babel is a toolchain to transpile new JavaScript syntax (e.g. ES6) down to older versions that is supported by browser or node.js execution environments. The latest major version at the moment is Babel 7. To transpile JavaScript React, we normally use bable.",source:"@site/docs/Web/Frontend/45.babel-react.md",sourceDirName:"Web/Frontend",slug:"/Web/Frontend/babel-react",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Web/Frontend/babel-react",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:45,frontMatter:{sidebar_position:45},sidebar:"tutorialSidebar",previous:{title:"Refactoring React ES6 Class Components with Property Initialisers",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Web/Frontend/property-initialiser-react-class"},next:{title:"My Gulp Job Example",permalink:"/mydatahack-old-blog/mydatahack-old-blog/Web/Frontend/gulp-job-examples"}},l={},c=[];function p(e){const t={code:"code",h1:"h1",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"clarifying-which-babel-to-use-for-compiling-react-today",children:"Clarifying Which Babel to Use for Compiling React Today"}),"\n",(0,a.jsx)(t.p,{children:"Babel is a toolchain to transpile new JavaScript syntax (e.g. ES6) down to older versions that is supported by browser or node.js execution environments. The latest major version at the moment is Babel 7. To transpile JavaScript React, we normally use bable."}),"\n",(0,a.jsx)(t.p,{children:"The problem is that babel is evolving so fast that it can be confusing to know what to use. Especially when you are supporting older React application as well as creating new ones. Is stage-x still a thing? What happens to preset-es2017? Why my babel has @babel prefix? What should I use?"}),"\n",(0,a.jsx)(t.p,{children:"If you are starting a new React project, my recommendation is to use the latest set. I have been guilty of using create react app or get other developers to configure the environment and was pretty confused about it. It took me a while to figure out what had been deprecated and what would be the best to use in my own React project. After burning my fingers a few times, I have a little bit better knowledge about this toolchain."}),"\n",(0,a.jsx)(t.p,{children:"Before going any further, I have to note that this is for compiling React with the latest webpack 4 and babel 7 to date. In this space, things move very quickly and everything becomes legacy in a few months time."}),"\n",(0,a.jsx)(t.p,{children:"Now, it\u2019s time to demystify some of the things that confused me as well as give you some tips to use babel."}),"\n",(0,a.jsx)(t.p,{children:"(1) stage-x and esYear modules are deprecated."}),"\n",(0,a.jsx)(t.p,{children:"We do not need to use stage-x or esYear modules. They are replaced by @babel/preset-env module."}),"\n",(0,a.jsx)(t.p,{children:"(2) @babel prefixed modules are the latest ones."}),"\n",(0,a.jsx)(t.p,{children:"If you are using something like babel-preset-env or babel-preset-stage-2, they are super old and not compatible with webpack 4. You will see them in legacy React apps with older webpack versions where developers are too scared to upgrade. You can spot them when you look at presets in babelrc files. They are short like [\u201cpreset-env\u201d, \u201cstage-2\u201d]. The latest ones has prefix as [\u201c@babel/preset-env\u201d]."}),"\n",(0,a.jsx)(t.p,{children:"(3) preset-env rules"}),"\n",(0,a.jsx)(t.p,{children:"Instead of yearly presets like es2017 or stage-x presets, use @babel/preset-env. It includes all the deprecated presets."}),"\n",(0,a.jsx)(t.p,{children:"(4) Don\u2019t worry about the target for preset-env if you don\u2019t have specific requirements"}),"\n",(0,a.jsx)(t.p,{children:"With preset-env, you can specify the target as in the documentation here. Note that the default is the browserlist. So, if you want to target browsers, you do not need to specify the target."}),"\n",(0,a.jsx)(t.p,{children:"Basically, this one is the same"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'"presets": [\n  [\n    "@babel/preset-env",\n    {\n      "targets": "> 0.25%, not dead"\n    }\n]\n'})}),"\n",(0,a.jsx)(t.p,{children:"As this one"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:'"presets": ["@babel/preset-env"]'})}),"\n",(0,a.jsx)(t.p,{children:"(5) Update babel often"}),"\n",(0,a.jsx)(t.p,{children:"If you are re-using package.json from a few month ago, it is probably outdated. You can upgrade babel with npx babel-upgrade"}),"\n",(0,a.jsxs)(t.p,{children:["(6) ",(0,a.jsx)(t.code,{children:"@babel/plugin-proposal-class-properties"})," are needed for using arrow function in React class"]}),"\n",(0,a.jsx)(t.p,{children:"Using arrow functions in React class is definitely preferable. Lexically scoped class functions are easier to use and make code more concise. Unfortunately, this is not supported out of the box preset-env. You need to install the plugins."}),"\n",(0,a.jsx)(t.p,{children:"(7) Read the error message"}),"\n",(0,a.jsx)(t.p,{children:"When compilation fails, babel gives you pretty good error message. Before jumping to google, make sure to read them. The answer is right in front of your eye."}),"\n",(0,a.jsx)(t.p,{children:"(8) Create .babelrc file instead of putting in package.json file"}),"\n",(0,a.jsx)(t.p,{children:"It is recommended by babel. The separation makes it maintainable because package.json file can get pretty big."}),"\n",(0,a.jsx)(t.p,{children:"Setup Example"}),"\n",(0,a.jsx)(t.p,{children:"Here is the example of babel set up. This is the minimum requirement to write modern React application."}),"\n",(0,a.jsx)(t.p,{children:".babelrc"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "presets": ["@babel/preset-react", "@babel/preset-env"],\n  "plugins": ["@babel/plugin-proposal-class-properties"]\n}\n'})}),"\n",(0,a.jsx)(t.p,{children:"Versions"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'"webpack": "^4.19.1",\n"@babel/core": "^7.1.0",\n"@babel/plugin-proposal-class-properties": "^7.4.4",\n"@babel/preset-env": "^7.1.0",\n"@babel/preset-react": "^7.0.0",\n'})}),"\n",(0,a.jsx)(t.p,{children:"Now we can finally stop worrying about compiling React and start building cool stuff \u2026 until the whole thing becomes obsolete in a few month time\u2026 urrg\u2026"}),"\n",(0,a.jsx)(t.p,{children:"(2019-07-04)"})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>i});var a=n(96540);const s={},o=a.createContext(s);function r(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);