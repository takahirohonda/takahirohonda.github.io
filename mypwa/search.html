<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="Description" content="PWA App Store">
  <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="img/favicons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="img/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16x16.png">

  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/main.min.css">

  <link rel="manifest" href="manifest.json">

  <title>MyPWA | Search Apps</title>

  <script>
  if('serviceWorker' in navigator) {
    navigator.serviceWorker
      .register('/mypwa/sw.js')
      // .register('/sw.js')
      .then(function() { 
        console.log("Service Worker Registered"); 
      });
  }
  </script>
</head>

<body>
  <div class="nav-menu-bg"></div>
  <nav class="top-nav-container-dark">
    <div class="container nav-bar-column">
      <div class="nav-logo-title">
        <a href="index.html" class="text-white">MyPWA</a>
      </div>
      <!-- Nav burger -->
      <div class="nav-burger-container navbar-toggle">
        <div class="nav-burger"></div>
      </div>
      <!-- Nav Content -->
      <div class="nav-bar-right">
        <div class="nav-link-container">
          <a class="nav-item text-white" href="index.html">Overview</a>
          <a class="nav-item text-white" href="search.html">Search</a>
          <a class="nav-item text-white" href="register.html">Register</a>
        </div>
      </div>
    </div>
  </nav>
  <div class="container">
    <div class="row">
      <form class="search-form">
        <div class="search-select-input-container">
          <div class="select-box-left-container">
            <select class="search-select">
              <option value="default">Select App Type</option>
              <option value="application">Application</option>
              <option value="game">Game</option>
            </select>
            </select>
            <select class="search-select">
              <option value="default">Select categories</option>
              <option value="art-design">Art & Design</option>
              <option value="auto-vehicles">Auto & Vehicles</option>
              <option value="books-reference">Books & Reference</option>
              <option value="business">Business</option>
              <option value="comics">Comics</option>
            </select>
          </div>
          <div class="select-box-right-container">
            <img src="img/sort-by-icon.svg" class="sort-by-icon" alt='sort by' />
            <label for="sort-by" class="sr-only">Sort by</label>
            <select class="sort-by-select" id="sort-by" style="opacity: 0">
              <option value="aZ">A to Z</option>
              <option value="zA">Z to A</option>
              <option value="aZ">Latest</option>
              <option value="aZ">Oldest</option>
            </select>
          </div>
        </div>
        <div class="search-input-container">
          <input type="text" class="search-input-field" id="search-top" name="search-top"
            placeholder="Search for apps & games">
          <button type="button" class="search-btn"><img class="search-icon" src="img/search-icon.svg" /></button>
        </div>
      </form>
    </div>
  </div>

  <!-- preloader -->
  <div class='preloader-background'>
    <div class="lds-roller">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>

  <!-- Page button -->
  <div class="container p-0 page-btn-top-container">
    <div class="page-btn-container">
      <button type="button" class="btn-page-base btn-arrow-base btn-forward"></button>
      <button type="button" class="btn-page-base btn-page active">1</button>
      <button type="button" class="btn-page-base btn-page">2</button>
      <button type="button" class="btn-page-base btn-page">3</button>
      <button type="button" class="btn-page-base btn-arrow-base btn-backward"></button>
    </div>
  </div>
  <!-- search results -->
  <div class="container p-0">
    <div class="app-store-title-container">
      <div class="app-store-title">
        App Store -
        <span class="search-result-title">Search Reuslts</span>
      </div>
    </div>
  </div>

  <!-- App Item 1-->
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result" src="https://mydatahack.github.io/mtd/img/icons/icon-128x128.png"
          alt="mtd-icon" />
      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            My to do app
          </div>
          <div class="search-result-app-sub-title">
            Organise your life with to do list
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://mydatahack.github.io/mtd/" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 45px"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Item 2-->
  <div class="between-app-items"></div>
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result"
          src="https://mydatahack.github.io/sitecore-exam-prep/img/icons/icon-128x128.png" alt="mtd-icon" />

      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            Sitecore Certification Exam Prep Quiz
          </div>
          <div class="search-result-app-sub-title">
            Sitecore Certified Platform Associate Developer Exam Prep Quiz
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://mydatahack.github.io/sitecore-exam-prep" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 50px"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Item 3-->
  <div class="between-app-items"></div>
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result" src="https://opposites.co/android-chrome-192x192.png" alt="mtd-icon" />

      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            Opposites Game
          </div>
          <div class="search-result-app-sub-title">
            Opposites Game
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://opposites.co/" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 35px"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Item 4-->
  <div class="between-app-items"></div>
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result" src="https://app.starbucks.com/weblx/images/icons/pwa-icon-192.png"
          alt="mtd-icon" />

      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            Starbucks
          </div>
          <div class="search-result-app-sub-title">
            Starbucks
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://app.starbucks.com/" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 25px"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Item 5-->
  <div class="between-app-items"></div>
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result" src="https://tinder.com/static/android-chrome-192x192.png" alt="mtd-icon" />

      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            Tinder
          </div>
          <div class="search-result-app-sub-title">
            With 20 billion matches to date, Tinder is the worldâ€™s most popular app for meeting new people.
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://tinder.com" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 15px"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Item 6-->
  <div class="between-app-items"></div>
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result" src="https://www.olx.in/logo/olx-192x192.png" alt="mtd-icon" />

      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            OLX Lite
          </div>
          <div class="search-result-app-sub-title">
            OLX Lite
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://www.olx.in/?install=true" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 10px"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Item 7 -->
  <div class="between-app-items"></div>
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result" src="https://www.trivago.com.au/favicon_144x144.png?" alt="mtd-icon" />

      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            Trivago
          </div>
          <div class="search-result-app-sub-title">
            Trivago
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://www.trivago.com.au/" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 5px"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Item 8 -->
  <div class="between-app-items"></div>
  <div class="container p-0">
    <div class="app-item-container">
      <div class="app-icon-search-result-container">
        <img class="app-icon-search-result" src="https://deanhume.github.io/beer/images/beer-icon-144.png"
          alt="mtd-icon" />

      </div>
      <div class="search-result-right-container d-flex justify-content-between">
        <div class="search-result-main-container">
          <div class="search-result-app-title">
            Progressive Beer
          </div>
          <div class="search-result-app-sub-title">
            Progressive Beer
          </div>
          <a class="download-now-link">
            <div class="download-now-text">
              <a href="https://deanhume.github.io/beer/" target="_blank">Download Now</a>
            </div>
          </a>
          <div class="search-result-rating-no">
            28 people rated it
          </div>

          <div class="search-result-rating">
            <span class="rating-star rating-star-base">
              <span class="rating-star-filled" style="width: 50px;"></span>
            </span>
          </div>
          <div class="search-result-free-text">
            Free
          </div>
        </div>
        <div class="search-result-rate-container">
          <button type="button" class="rate-app-btn cta-md">Rate this app</button>
          <button type="button" class="see-review-btn cta-md">See reviews</button>
        </div>
      </div>
    </div>
  </div>

  <script src="js/main.js"></script>
  <script>
    // Spinner for clicking search icon
    var preloader = document.querySelector('.preloader-background');
    var searchBtn = document.querySelector('.search-btn');

    searchBtn.addEventListener('click', () => {
      preloader.classList.add('active');
      setTimeout(() => { preloader.classList.remove('active') }, 3000)
    });

    // Event listener for the page
    var pageBtnContainer = document.querySelector('.page-btn-container');
    var pageButtons = document.querySelectorAll('.btn-page');

    pageBtnContainer.addEventListener('click', e => {
      if (!e.target.closest('.btn-arrow-base')) {
        clearActive(pageButtons);
      };

      if (e.target.closest('.btn-page')) {
        e.target.classList.add('active');
      };
    })

    function clearActive(elemList) {
      for (var i of elemList) {
        if(i.classList.contains('active')) {
          i.classList.remove('active');
        }
      }
    }

    // page button increment & decrement
    var currentIndex = 0;
    var recordCount = 75;
    var pageCount = Math.round(recordCount/10);
    
    var pageArray = [...Array(pageCount).keys()];
    var pageArrayFormatted = pageArray.map(a => a + 1);
    var pageUiArray = [];

    var pageBlockCount = Math.round(pageCount/3);

    for (var i=0; i < pageBlockCount; i++) {
      pageUiArray.push(pageArrayFormatted.slice(i*3, i*3+3))
    }

    console.log('output for pageUiArray: ', pageUiArray)

    document.querySelector('.btn-backward').addEventListener('click', () => {
      if (currentIndex !== pageBlockCount-1) {
        currentIndex += 1;
        var btnPage = document.querySelectorAll('.btn-page');
        for(var i=0; i < btnPage.length; i++) {
          // (1) clear active
          if (btnPage[i].classList.contains('active')) {
            btnPage[i].classList.remove('active');
          }
          // (2) When there is no value
          if (typeof(pageUiArray[currentIndex][i]) === 'undefined') {
            btnPage[i].innerHTML = '';
            btnPage[i].disabled = true;
            btnPage[i].classList.add('btn-arrow-base');
          } else {
            // (3) Add active back to first element
            if (i === 0) {
              if (!btnPage[i].classList.contains('active')) {
                btnPage[i].classList.add('active');
              }
            }
            btnPage[i].innerHTML = '';
            btnPage[i].innerHTML = pageUiArray[currentIndex][i]
          }
        }
      } 
    })
    
    document.querySelector('.btn-forward').addEventListener('click', () => {
      if (currentIndex !== 0) {
        currentIndex -= 1;
        var btnPage = document.querySelectorAll('.btn-page');
        for(var i=0; i < btnPage.length; i++) {
          // (1) Clear active
          if (btnPage[i].classList.contains('active')) {
            btnPage[i].classList.remove('active');
          }
          // (2) Clear transparent background in case it is required
          if (btnPage[i].classList.contains('btn-arrow-base')) {
            btnPage[i].classList.remove('btn-arrow-base')
            btnPage[i].disabled = false;
          }

          if (typeof(pageUiArray[currentIndex][i]) === 'undefined') {
            btnPage[i].innerHTML = '';
          } else {
            // (2) Add active back to the first element
            if (i === 0) {
              if (!btnPage[i].classList.contains('active')) {
                btnPage[i].classList.add('active');
              }
            }
            btnPage[i].innerHTML = '';
            btnPage[i].innerHTML = pageUiArray[currentIndex][i]
          }
        }
      } 
    })
  </script>
</body>

</html>